<!DOCTYPE html>
<html lang="en">
    <head>
        <title>12 Exercises</title>
    </head>
    <body>
        <button class="js-button-start">Start</button>
        <p>
            <button class="js-add-to-cart-button" onclick="
                addToCart2();
            ">
            Add to cart
            </button>
        </p>
        <div class="js-message"></div>
        <button onclick="
            message++;
            refreshTitle();
        ">Add</button>
        <button onclick="
            message--;
            refreshTitle();
        ">Remove</button>
        <script>
            /*
            const add = function() {
                console.log(2 + 3);
            };

            function runTwice(fun) {
                fun();
                fun();
            }

            runTwice(function() {
                console.log('12b')
            });

            runTwice(add);
            */
            
            //12c
            
            function changeText() {
                document.querySelector('.js-button-start').innerHTML = 'Finished!';
            }

            //12d

            function changeToLoading() {
                document.querySelector('.js-button-start').innerHTML = 'Loading...';
            }
            
            function start() {
                changeToLoading();
                setTimeout(changeText, 3000);
            }

            //12e
            
            function addToCart() {
                const messageElement = document.querySelector('.js-message');
                messageElement.innerHTML = 'Added';
                setTimeout(function() {
                    messageElement.innerHTML = '';
                }, 2000);
            }

            //12f

            //let isTimeCounting = false;
            let timeoutId;

            function addToCart2() {
                const messageElement = document.querySelector('.js-message');
                messageElement.innerHTML = 'Added';
                clearInterval(timeoutId);
                timeoutId = setTimeout(function() {
                    messageElement.innerHTML = '';
                }, 2000);
            }

            //12g, 12h
            
            let message = 2;
            let intervalId;
            
            function refreshTitle() {
                if (message <= 0) {
                    clearInterval(intervalId);
                    document.title = 'App';
                } else {
                    clearInterval(intervalId);
                    intervalId = setInterval(function() {
                        if (document.title === 'App') {
                            document.title = `(${message}) New messages`;
                        } else {
                            document.title = 'App';
                        }
                    }, 1000);
                }
            }

            document.querySelector('.js-button-start')
                .addEventListener('click', () => {
                    start();
                });

        </script>
    </body>
</html>